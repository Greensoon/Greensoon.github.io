/**
 * Artyom.js is a voice control, speech recognition and speech synthesis JavaScript library.
 *
 * @requires {webkitSpeechRecognition && speechSynthesis}
 * @license MIT
 * @version 1.0.6
 * @copyright 2017 Our Code World (www.ourcodeworld.com) All Rights Reserved.
 * @author Carlos Delgado (https://github.com/sdkcarlos) and Sema García (https://github.com/semagarcia)
 * @see https://sdkcarlos.github.io/sites/artyom.html
 * @see http://docs.ourcodeworld.com/projects/artyom-js
 */
var Artyom=function(){function e(){this.ArtyomCommands=[],this.ArtyomVoicesIdentifiers={"de-DE":["Google Deutsch","de-DE","de_DE"],"es-ES":["Google español","es-ES","es_ES","es-MX","es_MX"],"it-IT":["Google italiano","it-IT","it_IT"],"jp-JP":["Google 日本人","ja-JP","ja_JP"],"en-US":["Google US English","en-US","en_US"],"en-GB":["Google UK English Male","Google UK English Female","en-GB","en_GB"],"pt-BR":["Google português do Brasil","pt-PT","pt-BR","pt_PT","pt_BR"],"pt-PT":["Google português do Brasil","pt-PT","pt_PT"],"ru-RU":["Google русский","ru-RU","ru_RU"],"nl-NL":["Google Nederlands","nl-NL","nl_NL"],"fr-FR":["Google français","fr-FR","fr_FR"],"pl-PL":["Google polski","pl-PL","pl_PL"],"id-ID":["Google Bahasa Indonesia","id-ID","id_ID"],"hi-IN":["Google हिन्दी","hi-IN","hi_IN"],"zh-CN":["Google 普通话（中国大陆）","zh-CN","zh_CN"],"zh-HK":["Google 粤語（香港）","zh-HK","zh_HK"],native:["native"]},window.hasOwnProperty("speechSynthesis")?speechSynthesis.getVoices():console.error("Artyom.js can't speak without the Speech Synthesis API."),window.hasOwnProperty("webkitSpeechRecognition")?this.ArtyomWebkitSpeechRecognition=new window.webkitSpeechRecognition:console.error("Artyom.js can't recognize voice without the Speech Recognition API."),this.ArtyomProperties={lang:"en-GB",recognizing:!1,continuous:!1,speed:1,volume:1,listen:!1,mode:"normal",debug:!1,helpers:{redirectRecognizedTextOutput:null,remoteProcessorHandler:null,lastSay:null,fatalityPromiseCallback:null},executionKeyword:null,obeyKeyword:null,speaking:!1,obeying:!0,soundex:!1,name:null},this.ArtyomGarbageCollection=[],this.ArtyomFlags={restartRecognition:!1},this.ArtyomGlobalEvents={ERROR:"ERROR",SPEECH_SYNTHESIS_START:"SPEECH_SYNTHESIS_START",SPEECH_SYNTHESIS_END:"SPEECH_SYNTHESIS_END",TEXT_RECOGNIZED:"TEXT_RECOGNIZED",COMMAND_RECOGNITION_START:"COMMAND_RECOGNITION_START",COMMAND_RECOGNITION_END:"COMMAND_RECOGNITION_END",COMMAND_MATCHED:"COMMAND_MATCHED",NOT_COMMAND_MATCHED:"NOT_COMMAND_MATCHED"},this.Device={isMobile:!1,isChrome:!0},(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(this.Device.isMobile=!0),-1==navigator.userAgent.indexOf("Chrome")&&(this.Device.isChrome=!1),this.ArtyomVoice={default:!1,lang:"en-GB",localService:!1,name:"Google UK English Male",voiceURI:"Google UK English Male"}}return e.prototype.addCommands=function(e){var t=this,o=function(e){e.hasOwnProperty("indexes")?t.ArtyomCommands.push(e):console.error("The given command doesn't provide any index to execute.")};if(e instanceof Array)for(var r=0;r<e.length;r++)o(e[r]);else o(e);return!0},e.prototype.cleargarbagecollection="function(){return" this.artyomgarbagecollection="[]},e.prototype.debug=function(e,t){var" o="[v" +this.getversion()+"]="" artyom.js";if(!0="==this.ArtyomProperties.debug)switch(t){case"error":console.log("%c"+o+":%c" "+e,"background:="" #c12127;="" color:="" black;","color:black;");break;case"warn":console.warn(e);break;case"info":console.log("%c"+o+":%c="" #4285f4;="" #ffffff","color:black;");break;default:console.log("%c"+o+":%c="" #005454;="" #bff8f8","color:black;")}},e.prototype.detecterrors="function(){var" e="this;if("file:"==window.location.protocol){t="Error:" running="" artyom="" directly="" from="" a="" file.="" the="" apis="" require="" different="" communication="" protocol="" like="" http="" or="" https";return="" console.error(t),{code:"artyom_error_localfile",message:t}}if(!e.device.ischrome){var="" t="Error: the Speech Recognition and Speech Synthesis APIs require the Google Chrome Browser to work." ;return="" console.error(t),{code:"artyom_error_browser_unsupported",message:t}}return"https:"!="window.location.protocol&&console.warn("Warning:" is="" being="" executed="" using="" '"+window.location.protocol+"'="" protocol.="" continuous="" mode="" requires="" secure="" (https)"),!1},e.prototype.emptycommands="function(){return" this.artyomcommands="[]},e.prototype.execute=function(e){var" void="" t.debug('artyom="" with="" name="" "'+t.artyomproperties.name+"\"="" but="" wasn't="" spoken.","warn");e="e.substr(t.ArtyomProperties.name.length)}t.debug("">> "+e);for(l=0;l<t.artyomcommands.length;l++){for(var o="(u=t.ArtyomCommands[l]).indexes,r=-1,n="",i=0;i<o.length;i++){p=o[i];if(u.smart){if(p" instanceof="" regexp)p.test(e)&&(t.debug("="">> REGEX "+p.toString()+" MATCHED AGAINST "+e+" WITH INDEX "+i+" IN COMMAND ","info"),r=parseInt(i.toString()));else if(-1!=p.indexOf("*")){var s=p.split("*");if(s.length>2){console.warn("Artyom found a smart command with "+(s.length-1)+" wildcards. Artyom only support 1 wildcard for each command. Sorry");continue}var a=s[0],c=s[1];""==c||" "==c?-1==e.indexOf(a)&&-1==e.toLowerCase().indexOf(a.toLowerCase())||(n=(n=e.replace(a,"")).toLowerCase().replace(a.toLowerCase(),""),r=parseInt(i.toString())):-1==e.indexOf(a)&&-1==e.toLowerCase().indexOf(a.toLowerCase())||-1==e.indexOf(c)&&-1==e.toLowerCase().indexOf(c.toLowerCase())||(n=(n=(n=e.replace(a,"").replace(c,"")).toLowerCase().replace(a.toLowerCase(),"").replace(c.toLowerCase(),"")).toLowerCase().replace(c.toLowerCase(),""),r=parseInt(i.toString()))}else console.warn("Founded command marked as SMART but have no wildcard in the indexes, remove the SMART for prevent extensive memory consuming or add the wildcard *");if(r>=0){r=parseInt(i.toString());break}}}if(r>=0)return t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED),m={index:r,instruction:u,wildcard:{item:n,full:e}}}for(l=0;l<t.artyomcommands.length;l++){for(var o="(u=t.ArtyomCommands[l]).indexes,r=-1,i=0;i<o.length;i++){p=o[i];if(!u.smart){if(e===p){t.debug("">> MATCHED FULL EXACT OPTION "+p+" AGAINST "+e+" WITH INDEX "+i+" IN COMMAND ","info"),r=parseInt(i.toString());break}if(e.toLowerCase()===p.toLowerCase()){t.debug(">> MATCHED OPTION CHANGING ALL TO LOWERCASE "+p+" AGAINST "+e+" WITH INDEX "+i+" IN COMMAND ","info"),r=parseInt(i.toString());break}}}if(r>=0)return t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED),m={index:r,instruction:u}}for(l=0;l<t.artyomcommands.length;l++){for(var o="(u=t.ArtyomCommands[l]).indexes,r=-1,i=0;i<o.length;i++)if(!u.smart){p=o[i];if(e.indexOf(p)">=0){t.debug(">> MATCHED INDEX EXACT OPTION "+p+" AGAINST "+e+" WITH INDEX "+i+" IN COMMAND ","info"),r=parseInt(i.toString());break}if(e.toLowerCase().indexOf(p.toLowerCase())>=0){t.debug(">> MATCHED INDEX OPTION CHANGING ALL TO LOWERCASE "+p+" AGAINST "+e+" WITH INDEX "+i+" IN COMMAND ","info"),r=parseInt(i.toString());break}}if(r>=0)return t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED),m={index:r,instruction:u}}if(t.ArtyomProperties.soundex)for(var l=0;l<t.artyomcommands.length;l++)for(var u="t.ArtyomCommands[l],o=u.indexes,r=-1,i=0;i<o.length;i++){var" p="o[i];if(!u.smart&&t.soundex(e)==t.soundex(p)){t.debug("">> Matched Soundex command '"+p+"' AGAINST '"+e+"' with index "+i,"info"),r=parseInt(i.toString()),t.triggerEvent(t.ArtyomGlobalEvents.COMMAND_MATCHED);var m={index:r,instruction:u};return m}}t.debug("Event reached : "+t.ArtyomGlobalEvents.NOT_COMMAND_MATCHED),t.triggerEvent(t.ArtyomGlobalEvents.NOT_COMMAND_MATCHED)}else console.warn("Internal error: Execution of empty command")},e.prototype.fatality=function(){var e=this;return new Promise(function(t,o){e.ArtyomProperties.helpers.fatalityPromiseCallback=t;try{e.ArtyomFlags.restartRecognition=!1,e.ArtyomWebkitSpeechRecognition.stop()}catch(e){o(e)}})},e.prototype.getAvailableCommands=function(){return this.ArtyomCommands},e.prototype.getVoices=function(){return window.speechSynthesis.getVoices()},e.prototype.speechSupported=function(){return"speechSynthesis"in window},e.prototype.recognizingSupported=function(){return"webkitSpeechRecognition"in window},e.prototype.shutUp=function(){if("speechSynthesis"in window)do{window.speechSynthesis.cancel()}while(!0===window.speechSynthesis.pending);this.ArtyomProperties.speaking=!1,this.clearGarbageCollection()},e.prototype.getProperties=function(){return this.ArtyomProperties},e.prototype.getLanguage=function(){return this.ArtyomProperties.lang},e.prototype.getVersion=function(){return"1.0.6"},e.prototype.hey=function(e,t){var o,r=this;this.Device.isMobile?(this.ArtyomWebkitSpeechRecognition.continuous=!1,this.ArtyomWebkitSpeechRecognition.interimResults=!1,this.ArtyomWebkitSpeechRecognition.maxAlternatives=1):(this.ArtyomWebkitSpeechRecognition.continuous=!0,this.ArtyomWebkitSpeechRecognition.interimResults=!0),this.ArtyomWebkitSpeechRecognition.lang=this.ArtyomProperties.lang,this.ArtyomWebkitSpeechRecognition.onstart=function(){r.debug("Event reached : "+r.ArtyomGlobalEvents.COMMAND_RECOGNITION_START),r.triggerEvent(r.ArtyomGlobalEvents.COMMAND_RECOGNITION_START),r.ArtyomProperties.recognizing=!0,o=!0,e()},this.ArtyomWebkitSpeechRecognition.onerror=function(e){t(e.error),r.triggerEvent(r.ArtyomGlobalEvents.ERROR,{code:e.error}),"audio-capture"==e.error&&(o=!1),"not-allowed"==e.error&&(o=!1,e.timeStamp-void 0<100?r.triggerevent(r.artyomglobalevents.error,{code:"info-blocked",message:"artyom needs="" the="" permision="" of="" microphone,="" is="" blocked."}):r.triggerevent(r.artyomglobalevents.error,{code:"info-denied",message:"artyom="" denied"}))},r.artyomwebkitspeechrecognition.onend="function(){!0===r.ArtyomFlags.restartRecognition?(!0===o?(r.ArtyomWebkitSpeechRecognition.start(),r.debug("Continuous" mode="" enabled,="" restarting","info")):console.error("verify="" microphone="" and="" check="" for="" table="" errors="" in="" sdkcarlos.github.io="" sites="" artyom.html="" to="" solve="" your="" problem.="" if="" you="" want="" give="" user="" a="" message="" when="" an="" error="" appears="" add="" artyom="" listener"),r.triggerevent(r.artyomglobalevents.command_recognition_end,{code:"continuous_mode_enabled",message:"onend="" event="" reached="" with="" continuous="" mode"})):r.artyomproperties.helpers.fatalitypromisecallback&&(settimeout(function(){r.artyomproperties.helpers.fatalitypromisecallback()},500),r.triggerevent(r.artyomglobalevents.command_recognition_end,{code:"continuous_mode_disabled",message:"onend="" without="" mode"})),r.artyomproperties.recognizing="!1};var" n;if("normal"="=r.ArtyomProperties.mode&&(n=function(e){if(r.ArtyomCommands.length){var" t="e.results.length;r.triggerEvent(r.ArtyomGlobalEvents.TEXT_RECOGNIZED);for(var" o="e.resultIndex;o<t;++o){var" n="e.results[o][0].transcript;if(e.results[o].isFinal){var" i="r.execute(n.trim());if("function"==typeof" r.artyomproperties.helpers.redirectrecognizedtextoutput&&r.artyomproperties.helpers.redirectrecognizedtextoutput(n,!0),i&&1="=r.ArtyomProperties.recognizing){r.debug("<<" executing="" matching="" recognition="" normal="">>","info"),r.ArtyomWebkitSpeechRecognition.stop(),r.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item,i.wildcard.full):i.instruction.action(i.index);break}}else{if("function"==typeof r.ArtyomProperties.helpers.redirectRecognizedTextOutput&&r.ArtyomProperties.helpers.redirectRecognizedTextOutput(n,!1),"string"==typeof r.ArtyomProperties.executionKeyword&&-1!=n.indexOf(r.ArtyomProperties.executionKeyword)&&(i=r.execute(n.replace(r.ArtyomProperties.executionKeyword,"").trim()))&&1==r.ArtyomProperties.recognizing){r.debug("<< Executing command ordered by ExecutionKeyword >>","info"),r.ArtyomWebkitSpeechRecognition.stop(),r.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item,i.wildcard.full):i.instruction.action(i.index);break}r.debug("Normal mode : "+n)}}}else r.debug("No commands to process in normal mode.")}),"quick"==r.ArtyomProperties.mode&&(n=function(e){if(r.ArtyomCommands.length){var t=e.results.length;r.triggerEvent(r.ArtyomGlobalEvents.TEXT_RECOGNIZED);for(var o=e.resultIndex;o<t;++o){var n="e.results[o][0].transcript;if(e.results[o].isFinal){i=r.execute(n.trim());if("function"==typeof" r.artyomproperties.helpers.redirectrecognizedtextoutput&&r.artyomproperties.helpers.redirectrecognizedtextoutput(n,!1),i&&1="=r.ArtyomProperties.recognizing){r.debug("<<" executing="" matching="" recognition="" in="" quick="" mode="">>","info"),r.ArtyomWebkitSpeechRecognition.stop(),r.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item):i.instruction.action(i.index);break}}else{var i=r.execute(n.trim());if("function"==typeof r.ArtyomProperties.helpers.redirectRecognizedTextOutput&&r.ArtyomProperties.helpers.redirectRecognizedTextOutput(n,!0),i&&1==r.ArtyomProperties.recognizing){r.debug("<< Executing Matching Recognition in quick mode >>","info"),r.ArtyomWebkitSpeechRecognition.stop(),r.ArtyomProperties.recognizing=!1,i.wildcard?i.instruction.action(i.index,i.wildcard.item):i.instruction.action(i.index);break}}r.debug("Quick mode : "+n)}}else r.debug("No commands to process.")}),"remote"==r.ArtyomProperties.mode&&(n=function(e){var t=e.results.length;if(r.triggerEvent(r.ArtyomGlobalEvents.TEXT_RECOGNIZED),"function"!=typeof r.ArtyomProperties.helpers.remoteProcessorHandler)return r.debug("The remoteProcessorService is undefined.","warn");for(var o=e.resultIndex;o<t;++o){var n="e.results[o][0].transcript;r.ArtyomProperties.helpers.remoteProcessorHandler({text:n,isFinal:e.results[o].isFinal})}}),r.ArtyomWebkitSpeechRecognition.onresult=function(e){if(r.ArtyomProperties.obeying)n(e);else{if(!r.ArtyomProperties.obeyKeyword)return;for(var" t="" ,o="" ,i="0;i<e.results.length;++i)e.results[i].isFinal?t+=e.results[i][0].transcript:o+=e.results[i][0].transcript;r.debug("Artyom" is="" not="" obeying","warn"),(o.indexof(r.artyomproperties.obeykeyword)="">-1||t.indexOf(r.ArtyomProperties.obeyKeyword)>-1)&&(r.ArtyomProperties.obeying=!0)}},r.ArtyomProperties.recognizing)r.ArtyomWebkitSpeechRecognition.stop(),r.debug("Event reached : "+r.ArtyomGlobalEvents.COMMAND_RECOGNITION_END),r.triggerEvent(r.ArtyomGlobalEvents.COMMAND_RECOGNITION_END);else try{r.ArtyomWebkitSpeechRecognition.start()}catch(e){r.triggerEvent(r.ArtyomGlobalEvents.ERROR,{code:"recognition_overlap",message:"A webkitSpeechRecognition instance has been started while there's already running. Is recommendable to restart the Browser"})}},e.prototype.initialize=function(e){var t=this;return"object"!=typeof e?Promise.reject("You must give the configuration for start artyom properly."):(e.hasOwnProperty("lang")&&(t.ArtyomVoice=t.getVoice(e.lang),t.ArtyomProperties.lang=e.lang),e.hasOwnProperty("continuous")&&(e.continuous?(this.ArtyomProperties.continuous=!0,this.ArtyomFlags.restartRecognition=!0):(this.ArtyomProperties.continuous=!1,this.ArtyomFlags.restartRecognition=!1)),e.hasOwnProperty("speed")&&(this.ArtyomProperties.speed=e.speed),e.hasOwnProperty("soundex")&&(this.ArtyomProperties.soundex=e.soundex),e.hasOwnProperty("executionKeyword")&&(this.ArtyomProperties.executionKeyword=e.executionKeyword),e.hasOwnProperty("obeyKeyword")&&(this.ArtyomProperties.obeyKeyword=e.obeyKeyword),e.hasOwnProperty("volume")&&(this.ArtyomProperties.volume=e.volume),e.hasOwnProperty("listen")&&(this.ArtyomProperties.listen=e.listen),e.hasOwnProperty("name")&&(this.ArtyomProperties.name=e.name),e.hasOwnProperty("debug")?this.ArtyomProperties.debug=e.debug:console.warn("The initialization doesn't provide how the debug mode should be handled. Is recommendable to set this value either to true or false."),e.mode&&(this.ArtyomProperties.mode=e.mode),!0===this.ArtyomProperties.listen?new Promise(function(e,o){t.hey(e,o)}):Promise.resolve(!0))},e.prototype.on=function(e,t){var o=this;return{then:function(r){var n={indexes:e,action:r};t&&(n.smart=!0),o.addCommands(n)}}},e.prototype.triggerEvent=function(e,t){var o=new CustomEvent(e,{detail:t});return document.dispatchEvent(o),o},e.prototype.repeatLastSay=function(e){var t=this.ArtyomProperties.helpers.lastSay;if(e)return t;null!=t&&this.say(t.text)},e.prototype.when=function(e,t){return document.addEventListener(e,function(e){t(e.detail)},!1)},e.prototype.remoteProcessorService=function(e){return this.ArtyomProperties.helpers.remoteProcessorHandler=e,!0},e.prototype.voiceAvailable=function(e){return void 0!==this.getVoice(e)},e.prototype.isObeying=function(){return this.ArtyomProperties.obeying},e.prototype.obey=function(){return this.ArtyomProperties.obeying=!0},e.prototype.dontObey=function(){return this.ArtyomProperties.obeying=!1},e.prototype.isSpeaking=function(){return this.ArtyomProperties.speaking},e.prototype.isRecognizing=function(){return this.ArtyomProperties.recognizing},e.prototype.getNativeApi=function(){return this.ArtyomWebkitSpeechRecognition},e.prototype.getGarbageCollection=function(){return this.ArtyomGarbageCollection},e.prototype.getVoice=function(e){var t=this.ArtyomVoicesIdentifiers[e];t||(console.warn("The providen language "+e+" isn't available, using English Great britain as default"),t=this.ArtyomVoicesIdentifiers["en-GB"]);for(var o=void 0,r=speechSynthesis.getVoices(),n=t.length,i=0;i<n&&"break"!==function(e){var 0="==t?e!==r[o]:e!==n[t-1]}).join("")+"000").slice(0,4).toUpperCase()},e.prototype.splitStringByChunks=function(e,t){e=e||"";for(var" n="r.filter(function(o){return" o.name="=t[e]||o.lang==t[e]})[0];if(n)return" o="n,"break"}(i);i++);return" o},e.prototype.newdictation="function(e){var" t="this;if(!t.recognizingSupported())return" console.error("speechrecognition="" is="" not="" supported="" in="" this="" browser"),!1;var="" window.webkitspeechrecognition;return="" o.continuous="!0,o.interimResults=!0,o.lang=t.ArtyomProperties.lang,o.onresult=function(t){for(var" ,r="" ,n="0;n<t.results.length;++n)t.results[n].isFinal?o+=t.results[n][0].transcript:r+=t.results[n][0].transcript;e.onResult&&e.onResult(r,o)},new" function(){var="" e.onstart&&!0="==r&&e.onStart()},t.onend=function(){!0===n?(r=!1,t.start()):(r=!0,"function"==typeof" e.onend&&e.onend())},t.start()},this.stop="function(){n=!1,t.stop()},"function"==typeof" e.onerror&&(t.onerror="e.onError)}},e.prototype.newPrompt=function(e){"object"!=typeof" e&&console.error("expected="" the="" prompt="" configuration.");var="" r="{description:"Setting" artyom="" commands="" only="" for="" prompt.="" will="" be="" restored="" after="" finishes",indexes:e.options,action:function(r,n){o.artyomcommands="t;var" i="e.onMatch(r,n);"function"==typeof" i?i():console.error("onmatch="" function="" expects="" a="" returning="" to="" executed")}};e.smart&&(r.smart="!0),this.addCommands(r),void" 0!="=e.beforePrompt&&e.beforePrompt();var" instanceof="" array){var="" this.say(e[t]),{text:e[t],index:t}}return="" console.error("random="" quotes="" must="" an="" array="" !"),null},e.prototype.setdebug="function(e){return" this.artyomproperties.debug="!!e},e.prototype.simulateInstruction=function(e){var" e)return="" console.warn("cannot="" execute="" non="" string="" command"),!1;var="" o?(console.warn("no="" command="" founded="" trying="" with="" "+e),!1):o.instruction?(o.instruction.smart?(t.debug("smart="" matches="" simulation,="" executing","info"),o.instruction.action(o.index,o.wildcard.item,o.wildcard.full)):(t.debug("command="" executing","info"),o.instruction.action(o.index)),!0):void="" 0},e.prototype.soundex="function(e){var" r[e]}).filter(function(e,t,n){return="" "="=e[o++]&&(n.push(e.substring(r,o)),r=o,o+=t);return" n.push(e.substr(r)),n},e.prototype.redirectrecognizedtextoutput="function(e){return"function"!=typeof" e?(console.warn("expected="" handle="" recognized="" text="" ..."),!1):(this.artyomproperties.helpers.redirectrecognizedtextoutput="e,!0)},e.prototype.restart=function(){var" e="this,t=e.ArtyomProperties;return" new="" promise(function(o,r){e.fatality().then(function(){e.initialize(t).then(o,r)})})},e.prototype.talk="function(e,t,o,r){var" speechsynthesisutterance;i.text="e,i.volume=this.ArtyomProperties.volume,i.rate=this.ArtyomProperties.speed;var" s="n.getVoice(n.ArtyomProperties.lang);r&&r.hasOwnProperty("lang")&&(s=n.getVoice(r.lang)),this.Device.isMobile?s&&(i.lang=s.lang):i.voice=s,1==t&&i.addEventListener("start",function(){n.ArtyomProperties.speaking=!0,n.debug("Event" reached="" :="" "+n.artyomglobalevents.speech_synthesis_start),n.triggerevent(n.artyomglobalevents.speech_synthesis_start),r&&"function"="=typeof" r.onstart&&r.onstart.call(i)}),t="">=o&&i.addEventListener("end",function(){n.ArtyomProperties.speaking=!1,n.debug("Event reached : "+n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END),n.triggerEvent(n.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END),r&&"function"==typeof r.onEnd&&r.onEnd.call(i)}),this.debug(t+" text chunk processed succesfully out of "+o),this.ArtyomGarbageCollection.push(i),window.speechSynthesis.speak(i)},e.prototype.say=function(e,t){var o=this,r=[];if(this.speechSupported()){if("string"!=typeof e)return console.warn("Artyom expects a string to speak "+typeof e+" given");if(!e.length)return console.warn("Cannot speak empty string");e.length>115?e.split(/,|:|\. |;/).forEach(function(e,t){if(e.length>115){var n=o.splitStringByChunks(e,115);r.push.apply(r,n)}else r.push(e)}):r.push(e),(r=r.filter(function(e){return e})).forEach(function(e,n){var i=n+1;e&&o.talk(e,i,r.length,t)}),o.ArtyomProperties.helpers.lastSay={text:e,date:new Date}}},e}();</n&&"break"!==function(e){var></t;++o){var></t;++o){var></100?r.triggerevent(r.artyomglobalevents.error,{code:"info-blocked",message:"artyom></t.artyomcommands.length;l++)for(var></t.artyomcommands.length;l++){for(var></t.artyomcommands.length;l++){for(var></t.artyomcommands.length;l++){for(var></e.length;r++)o(e[r]);else>